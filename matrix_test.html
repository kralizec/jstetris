<html>
	<head>

		<link rel="stylesheet" type="text/css" media="screen" href="matrix_test.css"/>

		<script src='lib/jquery-1.3.2.js' type='text/javascript'></script>
		<script src='log.js' type='text/javascript'></script>
		<script src='game_matrix.js' type='text/javascript'></script>
		
		<script type='text/javascript'>

			$(document).ready( function(){
			
				scroll(0,0);
	
				var matrix = new GameMatrix();

				matrix.init(8,12);
				matrix.set_canvas('test_canvas');
				matrix.set_preview_canvas('preview_canvas');
				matrix.clear_canvas();

				matrix.draw_matrix();


				matrix.set_piece();

				//document.onkeydown = matrix.kb_input;
				document.onkeydown = function(e){

					Log.log('key pressed!' + e.keyCode);

					switch(e.keyCode){
						case 37: matrix.move_horiz(-1); break;
						case 38: matrix.rotate(); break;
						case 39: matrix.move_horiz(1); break;
						case 40: matrix.move_down(); break;
						case 80: matrix.toggle_pause(matrix); break;
					};

				};

				//document.keypress
				/*document.onkeypress = function(e){

					Log.log('key pressed!' + e.keyCode);

					switch(e.keyCode){
						case 37: matrix.move_horiz(-1); break;
						//case 38: matrix.rotate(); break;
						case 39: matrix.move_horiz(1); break;
						case 40: matrix.move_down(); break;
						//case 80: matrix.toggle_pause(matrix); break;
					};

				};*/


				// Start the game
				matrix.start(matrix);

			});

		</script>

	</head>
	<body>
		<canvas id="test_canvas" height="420px" width="288px"></canvas>
		<div id="right_pane">
			<canvas id="preview_canvas" height="100px" width="100px"></canvas>
		</div>
		<div id="debug_container"></div>
	</body>
</html>
